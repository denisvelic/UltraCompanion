<div class ="geo-container">
  <div class ="geo-image">
  <%=image_tag("icons/geolocation.svg")%>
  </div>
  <h1>Partage ta position</h1>
  <p>L'application nécessite ta position GPS pour te fournir des informations précises sur les points d'intérêt à proximité. Autorises-tu l'accès à ta position GPS ?</p>
  <div>
    <button class="geo-button" onclick="myGeolocator()">Autoriser maintenant</button>
    <div id="result"></div>
    <%= link_to "Explorer", live_path, class: "geo-button" %>
    <p>Plus tard</p>
  </div>
</div>

<script>
  let result = document.getElementById("result");
  let userLocation = navigator.geolocation;
  function myGeolocator() {
    if(userLocation) {
        userLocation.getCurrentPosition(success);
    } else {
        "The geolocation API is not supported by your browser.";
    }
  }
  function success(data) {
    let lat = data.coords.latitude;
    let long = data.coords.longitude;
    result.innerHTML = "Latitude: "
    + lat
    + "<br>Longitude: "
    + long;
  }
</script>
